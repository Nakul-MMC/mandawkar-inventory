{% extends "base.html" %}
{% block content %}

<h3 class="mb-4">
    Dashboard
    {% if low_stock_count > 0 %}
    <span class="badge bg-danger ms-2">
        {{ low_stock_count }} Low Stock Items
    </span>
    {% endif %}
</h3>

<!-- TOP METRICS -->
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card p-3 shadow-sm">
            <h6 class="text-muted">Total Stock Quantity</h6>
            <h2>{{ total_quantity }}</h2>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card p-3 shadow-sm">
            <h6 class="text-muted">Total Inventory Value</h6>
            <h2>₹ {{ total_value }}</h2>
        </div>
    </div>
</div>

<!-- STOCK SUMMARY -->
<div class="card p-3 shadow-sm">
    <h5 class="mb-3">Stock Summary</h5>

    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-dark">
                <tr>
                    <th>Category</th>
                    <th>Size</th>
                    <th>Type</th>
                    <th>Pattern / Variant</th>
                    <th>Quantity</th>
                    <th>Total Value (₹)</th>
                </tr>
            </thead>
            <tbody>
                {% for s in summary %}
                <tr class="{% if s[4] <= 10 %}table-danger{% endif %}">
                    <td>{{ s[0] }}</td>
                    <td>{{ s[1] or "-" }}</td>
                    <td>{{ s[2] or "-" }}</td>
                    <td>{{ s[3] or "-" }}</td>
                    <td>{{ s[4] }}</td>
                    <td>₹ {{ "%.2f"|format(s[5]) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
